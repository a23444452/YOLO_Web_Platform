# 圖像標註功能使用指南

本指南說明如何使用 YOLO Web Platform 的圖像標註功能，特別是類似 LabelImg 的本地資料夾工作流程。

## 🎯 功能特色

### 1. 開啟本地資料夾（推薦）
- ✅ 自動讀取資料夾中的所有圖片
- ✅ 自動載入現有的 YOLO 標註檔案（.txt）
- ✅ 自動讀取類別定義（classes.txt）
- ✅ 標註完成直接保存到原資料夾
- ✅ 無需手動導出，即時更新檔案

### 2. 傳統上傳方式
- 上傳單張或多張圖片
- 手動新增類別
- 完成後導出 ZIP 檔案

## 📖 使用方法

### 方法一：開啟資料夾（推薦，仿 LabelImg）

#### 步驟 1：準備資料夾

建立資料夾並放入圖片：
```
my-dataset/
├── image1.jpg
├── image2.jpg
├── image3.png
└── ...
```

如果已有標註，資料夾結構應為：
```
my-dataset/
├── image1.jpg
├── image1.txt        # YOLO 格式標註
├── image2.jpg
├── image2.txt
├── classes.txt       # 類別定義（可選）
└── ...
```

**classes.txt 格式範例**：
```
person
car
dog
cat
```

#### 步驟 2：開啟資料夾

1. 進入「圖像標註」頁面
2. 點擊「開啟資料夾（含現有標註）」按鈕
3. 選擇您的資料夾並授予讀寫權限
4. 系統會自動載入：
   - 所有圖片檔案
   - 現有的標註（如果有）
   - 類別定義（如果有 classes.txt）

#### 步驟 3：開始標註

1. 在左側圖片列表選擇圖片
2. 在右側管理類別（如果還沒有）
3. 在畫布上框選物件：
   - 選擇類別（按數字鍵 1-9）
   - 拖曳滑鼠繪製邊界框
   - 調整框的大小和位置

#### 步驟 4：保存標註

**方式 1：保存當前圖片**
- 點擊「保存當前」按鈕
- 或按 `Ctrl + S`
- 在原資料夾產生/更新 .txt 檔案

**方式 2：保存全部圖片**
- 點擊「保存全部」按鈕
- 或按 `Ctrl + Shift + S`
- 批量更新所有標註檔案

#### 檔案更新

保存後，資料夾中會自動新增/更新：
```
my-dataset/
├── image1.jpg
├── image1.txt        # ✅ 已更新
├── image2.jpg
├── image2.txt        # ✅ 已更新
├── classes.txt       # ✅ 已更新
└── ...
```

### 方法二：傳統上傳方式

1. 拖曳圖片到上傳區域，或點擊「上傳圖片」
2. 在類別管理器新增類別
3. 開始標註
4. 點擊「導出 ZIP」下載標註結果

## ⌨️ 快捷鍵

### 標註操作
- `1-9`：快速切換類別
- `Delete`：刪除選中的邊界框
- `← →`：切換上一張/下一張圖片
- `Ctrl + Z`：撤銷
- `Ctrl + Y`：重做

### 檔案操作
- `Ctrl + S`：保存當前圖片標註
- `Ctrl + Shift + S`：保存全部標註

### 畫布操作
- 滑鼠滾輪：縮放
- 拖曳邊界框：移動
- 拖曳控制點：調整大小

## 📋 YOLO 標註格式

每個圖片的 .txt 檔案包含多行，每行代表一個物件：

```
<class_id> <x_center> <y_center> <width> <height>
```

### 範例

`image1.txt`:
```
0 0.500000 0.500000 0.200000 0.300000
1 0.750000 0.250000 0.150000 0.150000
```

說明：
- 第一個物件：類別 0，中心點 (0.5, 0.5)，寬度 0.2，高度 0.3
- 第二個物件：類別 1，中心點 (0.75, 0.25)，寬度 0.15，高度 0.15
- 所有座標都歸一化到 [0, 1] 範圍

## 🔒 隱私與安全

### 本地處理
- ✅ 所有檔案處理在瀏覽器本地完成
- ✅ 不會上傳圖片到伺服器
- ✅ 直接讀寫本地檔案系統
- ✅ 標註資料完全保留在您的電腦

### 權限要求
- 需要授予資料夾讀寫權限
- 權限僅在瀏覽器分頁有效
- 關閉分頁後需重新授權

## 🌐 瀏覽器支援

### 支援的瀏覽器
- ✅ Google Chrome 86+
- ✅ Microsoft Edge 86+
- ✅ Opera 72+

### 不支援的瀏覽器
- ❌ Safari（不支援 File System Access API）
- ❌ Firefox（預設關閉此功能）

如果使用不支援的瀏覽器，系統會顯示提示訊息，建議使用「傳統上傳方式」。

## 💡 使用技巧

### 1. 快速標註流程
```
開啟資料夾 → 選擇圖片 → 框選物件 → Ctrl+S → 下一張
```

### 2. 批量處理
- 標註多張圖片後使用 `Ctrl + Shift + S` 一次保存全部
- 避免頻繁寫入檔案系統

### 3. 增量標註
- 可以隨時關閉瀏覽器
- 下次開啟同一資料夾會載入已有標註
- 繼續未完成的標註工作

### 4. 備份建議
- 定期備份資料夾
- 重要專案建議使用版本控制（Git）

## 🐛 常見問題

### Q: 為什麼保存按鈕無法使用？
A: 需要先使用「開啟資料夾」功能獲得檔案系統權限。傳統上傳方式只能使用「導出 ZIP」。

### Q: 標註檔案保存在哪裡？
A: 直接保存在您開啟的資料夾中，與圖片同目錄。

### Q: 可以編輯已有的標註嗎？
A: 可以。開啟資料夾時會自動載入現有標註，修改後保存即可更新。

### Q: 支援哪些圖片格式？
A: 支援所有瀏覽器支援的圖片格式：JPG、PNG、GIF、WebP 等。

### Q: classes.txt 是必需的嗎？
A: 不是必需的。如果沒有，需要手動新增類別。有的話可以自動載入。

### Q: 可以修改類別順序嗎？
A: 類別 ID 是固定的。建議在開始標註前先定義好所有類別。

## 🔗 相關連結

- [YOLO 格式說明](https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data)
- [Ultralytics 官方文件](https://docs.ultralytics.com/)
- [File System Access API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API)

## 📞 技術支援

如遇到問題，請提供以下資訊：
- 瀏覽器版本
- 錯誤訊息截圖
- 資料夾結構
- 操作步驟

---

Generated with YOLO Web Platform
