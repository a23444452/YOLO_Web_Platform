# YOLO Web 平台 - 功能測試指南

## 測試環境
- 開發伺服器: http://localhost:5174/
- 啟動命令: `npm run dev`
- 構建命令: `npm run build`

## 測試清單

### 1. 圖片上傳功能測試

#### 1.1 選擇多張圖片上傳
**測試步驟:**
1. 訪問 http://localhost:5174/annotation
2. 點擊「選擇圖片」按鈕
3. 在檔案選擇器中,按住 Ctrl (Windows) 或 Cmd (Mac) 選擇多張圖片
4. 點擊「開啟」

**預期結果:**
- ✅ 顯示成功上傳提示訊息(如:"成功上傳 5 張圖片")
- ✅ 左側圖片列表顯示所有上傳的圖片
- ✅ 第一張圖片自動被選中並顯示在 Canvas 上
- ✅ 顯示統計資訊(已標註 0 / 5)

#### 1.2 選擇資料夾上傳
**測試步驟:**
1. 訪問 http://localhost:5174/annotation
2. 點擊「選擇資料夾」按鈕
3. 選擇包含圖片的資料夾
4. 點擊「選擇」或「開啟」

**預期結果:**
- ✅ 顯示成功上傳提示訊息
- ✅ 資料夾內所有圖片文件被過濾並上傳
- ✅ 非圖片文件被自動過濾(如 .txt, .json 等)
- ✅ 圖片列表正確顯示所有上傳的圖片

#### 1.3 拖放上傳
**測試步驟:**
1. 訪問 http://localhost:5174/annotation
2. 從檔案管理器選擇多張圖片或整個資料夾
3. 拖放到上傳區域

**預期結果:**
- ✅ 拖放時上傳區域有視覺反饋
- ✅ 圖片成功上傳並顯示
- ✅ 支援同時拖放多個檔案

---

### 2. Canvas 標註功能測試

#### 2.1 繪製邊界框
**測試步驟:**
1. 上傳圖片後選擇一張圖片
2. 在底部選擇類別(如 "person")
3. 在圖片上按住滑鼠左鍵拖曳繪製矩形框
4. 釋放滑鼠

**預期結果:**
- ✅ 能夠流暢地繪製邊界框
- ✅ 邊界框使用選中類別的顏色
- ✅ 邊界框左上角顯示類別標籤
- ✅ 釋放後框體被保存

#### 2.2 選擇邊界框
**測試步驟:**
1. 點擊已繪製的邊界框內部
2. 點擊空白處
3. 點擊另一個邊界框

**預期結果:**
- ✅ 點擊框體後,框體被選中並顯示 8 個白色控制點
- ✅ 左上角顯示狀態提示:"已選中框體 person (按 Esc 取消 / Delete 刪除)"
- ✅ 點擊空白處,選擇被取消,控制點消失
- ✅ 點擊另一個框體時,選擇切換到新框體
- ✅ 點擊靈敏度良好,容易操作

#### 2.3 移動邊界框
**測試步驟:**
1. 選中一個邊界框
2. 在框體內部按住滑鼠左鍵拖曳
3. 移動到新位置後釋放

**預期結果:**
- ✅ 框體能夠跟隨滑鼠移動
- ✅ 移動過程中保持框體大小不變
- ✅ 釋放後框體位置被保存
- ✅ 移動不會超出圖片邊界

#### 2.4 調整邊界框大小
**測試步驟:**
1. 選中一個邊界框(顯示 8 個控制點)
2. 分別測試 8 個控制點:
   - 四個角點 (nw, ne, se, sw)
   - 四個邊中點 (n, e, s, w)
3. 拖曳控制點調整大小

**預期結果:**
- ✅ 所有 8 個控制點都能正常工作
- ✅ 角點控制點同時調整寬度和高度
- ✅ 邊中點控制點只調整一個維度
- ✅ 調整過程流暢,無卡頓
- ✅ 控制點檢測靈敏,容易點擊(24px 檢測區域)

#### 2.5 刪除邊界框
**測試步驟:**
1. 選中一個邊界框
2. 按 Delete 鍵
3. 或點擊右上角的垃圾桶按鈕

**預期結果:**
- ✅ 框體被立即刪除
- ✅ 類別計數正確更新
- ✅ 選擇狀態被清除

#### 2.6 快捷鍵測試
**測試步驟:**
1. 按數字鍵 1-9 切換類別
2. 繪製框體時按 Escape 取消
3. 選中框體後按 Escape 取消選擇
4. 選中框體後按 Delete 刪除

**預期結果:**
- ✅ 數字鍵能夠切換類別(底部按鈕視覺反饋)
- ✅ Escape 鍵正確取消操作
- ✅ Delete 鍵正確刪除選中框體

#### 2.7 縮放和平移
**測試步驟:**
1. 點擊 + 按鈕放大
2. 點擊 - 按鈕縮小
3. 使用滑鼠滾輪縮放
4. 按住空格鍵 + 拖曳平移畫布

**預期結果:**
- ✅ 縮放功能正常工作(範圍 0.1-5x)
- ✅ 平移功能正常工作
- ✅ 縮放後框體座標正確
- ✅ 縮放中心點合理

---

### 3. 類別管理測試

#### 3.1 新增類別
**測試步驟:**
1. 在左側類別管理區點擊「新增類別」
2. 輸入類別名稱(如 "car")
3. 確認

**預期結果:**
- ✅ 新類別出現在列表中
- ✅ 自動分配不同的顏色
- ✅ 類別 ID 按順序遞增
- ✅ 計數初始為 0

#### 3.2 編輯類別
**測試步驟:**
1. 點擊類別右側的編輯按鈕
2. 修改類別名稱
3. 確認

**預期結果:**
- ✅ 類別名稱成功更新
- ✅ 所有使用該類別的框體標籤自動更新

#### 3.3 刪除類別
**測試步驟:**
1. 先用某個類別繪製一些框體
2. 刪除該類別
3. 確認操作

**預期結果:**
- ✅ 類別被刪除
- ✅ 所有使用該類別的框體也被刪除
- ✅ 顯示警告提示

---

### 4. 圖片列表測試

#### 4.1 切換圖片
**測試步驟:**
1. 上傳多張圖片
2. 點擊左側圖片列表中的不同圖片
3. 使用左右箭頭鍵切換

**預期結果:**
- ✅ 點擊圖片能夠切換顯示
- ✅ 左右箭頭鍵能夠切換上/下一張
- ✅ 當前圖片有高亮顯示
- ✅ 圖片縮圖正確顯示

#### 4.2 刪除圖片
**測試步驟:**
1. 在圖片列表中刪除某張圖片
2. 刪除當前顯示的圖片

**預期結果:**
- ✅ 圖片被成功刪除
- ✅ 圖片的所有標註也被刪除
- ✅ 如果刪除當前圖片,自動切換到其他圖片

---

### 5. YOLO 格式導出測試

#### 5.1 無圖片導出
**測試步驟:**
1. 不上傳任何圖片
2. 點擊「導出」按鈕

**預期結果:**
- ✅ 顯示錯誤提示:"沒有圖片可導出"
- ✅ 不執行導出操作

#### 5.2 無標註導出
**測試步驟:**
1. 上傳圖片但不繪製任何標註
2. 點擊「導出」按鈕

**預期結果:**
- ✅ 顯示錯誤提示:"沒有標註可導出"
- ✅ 不執行導出操作

#### 5.3 正常導出
**測試步驟:**
1. 上傳多張圖片(建議 3-5 張)
2. 對部分圖片進行標註(至少一張)
3. 創建多個類別(如 person, car, dog)
4. 點擊「導出」按鈕
5. 等待下載完成
6. 解壓 ZIP 檔案

**預期結果:**
- ✅ 按鈕顯示載入動畫和"導出中..."文字
- ✅ 成功下載 ZIP 檔案(檔名格式: yolo-dataset-2026-01-17.zip)
- ✅ 顯示成功提示(如:"成功導出 3 張已標註圖片")
- ✅ ZIP 檔案包含正確的目錄結構:
  ```
  yolo-dataset-2026-01-17.zip
  ├── images/        (所有圖片)
  ├── labels/        (YOLO 格式 .txt 標註檔案)
  ├── classes.txt    (類別列表)
  ├── data.yaml      (YOLO 配置)
  └── README.md      (說明文檔)
  ```

#### 5.4 驗證導出內容

**classes.txt 格式檢查:**
```
person
car
dog
```
- ✅ 每行一個類別名稱
- ✅ 按類別 ID 排序
- ✅ 無多餘空格或特殊字符

**labels/*.txt 格式檢查:**
```
0 0.512345 0.623456 0.234567 0.345678
1 0.312345 0.423456 0.134567 0.245678
```
- ✅ 每行格式: `<class_id> <x_center> <y_center> <width> <height>`
- ✅ 座標為歸一化值(0-1 之間)
- ✅ 6 位小數精度
- ✅ 檔名與圖片檔名對應(除副檔名外)

**data.yaml 格式檢查:**
```yaml
path: ./
train: images
val: images

nc: 3
names: ["person", "car", "dog"]
```
- ✅ 包含正確的類別數量
- ✅ 類別名稱陣列正確
- ✅ 路徑配置正確

**README.md 檢查:**
- ✅ 包含生成時間
- ✅ 包含資料集統計(圖片數、標註數、類別數)
- ✅ 包含類別分布統計
- ✅ 包含使用說明

#### 5.5 導出檔案可用性測試
**測試步驟:**
1. 使用導出的資料集進行 YOLO 訓練測試:
   ```bash
   yolo train data=data.yaml model=yolov8n.pt epochs=1 imgsz=640
   ```

**預期結果:**
- ✅ YOLO 能夠正確讀取 data.yaml
- ✅ 能夠載入圖片和標註
- ✅ 無格式錯誤
- ✅ 座標範圍正確(0-1)

---

### 6. 邊界情況測試

#### 6.1 大量圖片測試
- 上傳 50+ 張圖片
- 檢查性能和記憶體使用

#### 6.2 大尺寸圖片測試
- 上傳 4K 或更高解析度圖片
- 檢查縮放和渲染性能

#### 6.3 小尺寸框體測試
- 繪製非常小的邊界框(如 10x10 像素)
- 檢查是否能正常選擇和調整

#### 6.4 重疊框體測試
- 繪製多個重疊的邊界框
- 檢查點擊選擇是否選中最上層框體

#### 6.5 瀏覽器兼容性測試
- Chrome (推薦)
- Firefox
- Safari
- Edge

---

## 已知限制

1. **檔案大小限制**: 建議單張圖片不超過 10MB
2. **瀏覽器記憶體**: 大量圖片可能消耗較多記憶體
3. **資料持久化**: 目前使用 Zustand 狀態管理,重新整理會清空資料
4. **僅支援前端**: 無後端儲存,資料僅存在瀏覽器中

---

## 測試報告模板

### 測試環境
- 日期: YYYY-MM-DD
- 瀏覽器: Chrome 120.x
- 作業系統: macOS / Windows / Linux

### 測試結果摘要
- ✅ 通過: X 項
- ❌ 失敗: Y 項
- ⚠️  部分通過: Z 項

### 詳細結果
| 功能模組 | 測試項目 | 結果 | 備註 |
|---------|---------|------|------|
| 圖片上傳 | 多張圖片選擇 | ✅ | 無問題 |
| 圖片上傳 | 資料夾選擇 | ✅ | 無問題 |
| Canvas 標註 | 繪製框體 | ✅ | 無問題 |
| Canvas 標註 | 選擇框體 | ✅ | 靈敏度良好 |
| Canvas 標註 | 移動框體 | ✅ | 無問題 |
| Canvas 標註 | 調整大小 | ✅ | 8 個控制點都正常 |
| YOLO 導出 | 格式正確性 | ✅ | 無問題 |
| YOLO 導出 | 可用性 | ✅ | YOLO 訓練成功 |

### 發現的問題
1. (如有問題,在此列出)

### 建議改進
1. (如有建議,在此列出)

---

## 快速驗證腳本

如果您想快速驗證所有核心功能,請按照以下步驟操作:

1. **啟動應用**: `npm run dev`
2. **訪問**: http://localhost:5174/annotation
3. **上傳測試圖片**: 選擇 3-5 張測試圖片
4. **繪製標註**: 在每張圖片上繪製 2-3 個邊界框
5. **測試編輯**:
   - 選擇框體(看到 8 個控制點)
   - 移動框體
   - 調整大小(測試角點和邊中點)
   - 按 Delete 刪除一個框體
6. **導出測試**: 點擊導出按鈕,下載 ZIP
7. **驗證內容**: 解壓 ZIP 並檢查檔案結構和格式

如果以上步驟都能順利完成,說明核心功能運作正常!
