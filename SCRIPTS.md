# è‡ªå‹•åŒ–è…³æœ¬ä½¿ç”¨æŒ‡å—

æœ¬å°ˆæ¡ˆæä¾›äº†å››å€‹è‡ªå‹•åŒ–ç®¡ç†è…³æœ¬ï¼Œæ–¹ä¾¿å¿«é€Ÿå•Ÿå‹•ã€åœæ­¢å’Œç®¡ç†å‰å¾Œç«¯æœå‹™ã€‚

## ğŸ“‹ è…³æœ¬æ¸…å–®

| è…³æœ¬ | åŠŸèƒ½ | èªªæ˜ |
|------|------|------|
| `start.sh` | å•Ÿå‹•æ‰€æœ‰æœå‹™ | è‡ªå‹•å•Ÿå‹•å¾Œç«¯å’Œå‰ç«¯ï¼Œä¸¦é€²è¡Œå¥åº·æª¢æŸ¥ |
| `stop.sh` | åœæ­¢æ‰€æœ‰æœå‹™ | å®‰å…¨åœæ­¢æ‰€æœ‰é‹è¡Œä¸­çš„æœå‹™ |
| `status.sh` | æŸ¥çœ‹æœå‹™ç‹€æ…‹ | é¡¯ç¤ºæœå‹™é‹è¡Œç‹€æ…‹å’Œè³‡æºä½¿ç”¨æƒ…æ³ |
| `restart.sh` | é‡å•Ÿæ‰€æœ‰æœå‹™ | å…ˆåœæ­¢å†å•Ÿå‹•æ‰€æœ‰æœå‹™ |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å•Ÿå‹•æœå‹™

```bash
./start.sh
```

**åŠŸèƒ½èªªæ˜**:
- âœ… è‡ªå‹•æª¢æŸ¥å¾Œç«¯è™›æ“¬ç’°å¢ƒ
- âœ… è‡ªå‹•æª¢æŸ¥å‰ç«¯ä¾è³´
- âœ… å•Ÿå‹•å¾Œç«¯æœå‹™ï¼ˆFastAPIï¼‰
- âœ… å•Ÿå‹•å‰ç«¯æœå‹™ï¼ˆViteï¼‰
- âœ… å¥åº·æª¢æŸ¥ï¼ˆæœ€å¤šç­‰å¾… 30 ç§’ï¼‰
- âœ… é¡¯ç¤ºæœå‹™ URL å’Œæ—¥èªŒä½ç½®
- âœ… å¾Œå°é‹è¡Œï¼ˆä½¿ç”¨ nohupï¼‰

**å•Ÿå‹•æˆåŠŸå¾Œæœƒé¡¯ç¤º**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          æ‰€æœ‰æœå‹™å•Ÿå‹•æˆåŠŸï¼                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æœå‹™è³‡è¨Š:
  å‰ç«¯: http://localhost:5173
  å¾Œç«¯: http://localhost:8000
  API æ–‡æª”: http://localhost:8000/docs

æ—¥èªŒæª”æ¡ˆ:
  å¾Œç«¯: tail -f /Users/vincewang/YOLO-Project/logs/backend.log
  å‰ç«¯: tail -f /Users/vincewang/YOLO-Project/logs/frontend.log

æŒ‰ Ctrl+C åœæ­¢æ‰€æœ‰æœå‹™
```

### 2. æŸ¥çœ‹ç‹€æ…‹

```bash
./status.sh
```

**é¡¯ç¤ºå…§å®¹**:
- å¾Œç«¯æœå‹™ç‹€æ…‹ï¼ˆé‹è¡Œä¸­/å·²åœæ­¢ï¼‰
- å‰ç«¯æœå‹™ç‹€æ…‹ï¼ˆé‹è¡Œä¸­/å·²åœæ­¢ï¼‰
- HTTP å¥åº·æª¢æŸ¥çµæœ
- CPU å’Œè¨˜æ†¶é«”ä½¿ç”¨ç‡
- é€²ç¨‹ PID
- æœå‹™ URL
- æ—¥èªŒæª”æ¡ˆä½ç½®

**è¼¸å‡ºç¯„ä¾‹**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     YOLO Web Platform - æœå‹™ç‹€æ…‹          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

å¾Œç«¯æœå‹™ (FastAPI):
  ç‹€æ…‹: é‹è¡Œä¸­ (PID: 12345)
  å¥åº·: æ­£å¸¸
  URL: http://localhost:8000
  API æ–‡æª”: http://localhost:8000/docs

å‰ç«¯æœå‹™ (Vite):
  ç‹€æ…‹: é‹è¡Œä¸­ (PID: 12346)
  å¥åº·: æ­£å¸¸
  URL: http://localhost:5173

è³‡æºä½¿ç”¨:
  å¾Œç«¯ - CPU: 2.5%, è¨˜æ†¶é«”: 1.2%
  å‰ç«¯ - CPU: 0.8%, è¨˜æ†¶é«”: 0.5%
```

### 3. åœæ­¢æœå‹™

```bash
./stop.sh
```

**åŠŸèƒ½èªªæ˜**:
- âœ… å„ªé›…åœæ­¢å¾Œç«¯æœå‹™
- âœ… å„ªé›…åœæ­¢å‰ç«¯æœå‹™
- âœ… å¦‚éœ€è¦å‰‡å¼·åˆ¶çµ‚æ­¢ï¼ˆSIGKILLï¼‰
- âœ… æ¸…ç†æ®˜ç•™é€²ç¨‹
- âœ… æ¸…ç† PID æª”æ¡ˆ

**åœæ­¢é †åº**:
1. ç™¼é€ SIGTERM ä¿¡è™Ÿï¼ˆå„ªé›…åœæ­¢ï¼‰
2. ç­‰å¾… 2 ç§’
3. å¦‚ä»åœ¨é‹è¡Œï¼Œç™¼é€ SIGKILLï¼ˆå¼·åˆ¶çµ‚æ­¢ï¼‰
4. æ¸…ç†å¯èƒ½çš„æ®˜ç•™é€²ç¨‹

### 4. é‡å•Ÿæœå‹™

```bash
./restart.sh
```

**åŠŸèƒ½èªªæ˜**:
- å…ˆåŸ·è¡Œ `stop.sh` åœæ­¢æ‰€æœ‰æœå‹™
- ç­‰å¾… 2 ç§’
- å†åŸ·è¡Œ `start.sh` å•Ÿå‹•æ‰€æœ‰æœå‹™

## ğŸ“ ç”Ÿæˆçš„æª”æ¡ˆ

### PID æª”æ¡ˆ
å­˜æ”¾åœ¨ `.pids/` ç›®éŒ„ï¼š
- `backend.pid` - å¾Œç«¯é€²ç¨‹ ID
- `frontend.pid` - å‰ç«¯é€²ç¨‹ ID

### æ—¥èªŒæª”æ¡ˆ
å­˜æ”¾åœ¨ `logs/` ç›®éŒ„ï¼š
- `backend.log` - å¾Œç«¯æœå‹™æ—¥èªŒ
- `frontend.log` - å‰ç«¯æœå‹™æ—¥èªŒ

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹å³æ™‚æ—¥èªŒ

```bash
# å¾Œç«¯æ—¥èªŒ
tail -f logs/backend.log

# å‰ç«¯æ—¥èªŒ
tail -f logs/frontend.log

# åŒæ™‚æŸ¥çœ‹å…©è€…
tail -f logs/backend.log logs/frontend.log
```

### æ¸…ç†æ—¥èªŒ

```bash
# æ¸…ç©ºæ—¥èªŒæª”æ¡ˆ
> logs/backend.log
> logs/frontend.log

# æˆ–åˆªé™¤æ—¥èªŒæª”æ¡ˆ
rm logs/*.log
```

### æ‰‹å‹•ç®¡ç†é€²ç¨‹

```bash
# æŸ¥çœ‹é€²ç¨‹
ps aux | grep "yolo_api.main"
ps aux | grep "vite"

# æ‰‹å‹•åœæ­¢ï¼ˆå¦‚æœè…³æœ¬å¤±æ•ˆï¼‰
pkill -f "python -m yolo_api.main"
pkill -f "vite.*5173"
```

## ğŸ”§ æ•…éšœæ’é™¤

### è…³æœ¬ç„¡æ³•åŸ·è¡Œ

```bash
# ç¢ºèªè…³æœ¬æœ‰åŸ·è¡Œæ¬Šé™
chmod +x *.sh

# å¦‚é¡¯ç¤ºæ¬Šé™éŒ¯èª¤
sudo chmod +x *.sh
```

### æœå‹™å•Ÿå‹•å¤±æ•—

1. **æª¢æŸ¥åŸ è™Ÿæ˜¯å¦è¢«å ç”¨**:
```bash
# æª¢æŸ¥ 8000 åŸ ï¼ˆå¾Œç«¯ï¼‰
lsof -i :8000

# æª¢æŸ¥ 5173 åŸ ï¼ˆå‰ç«¯ï¼‰
lsof -i :5173

# é‡‹æ”¾åŸ è™Ÿ
kill -9 <PID>
```

2. **æª¢æŸ¥ä¾è³´**:
```bash
# å¾Œç«¯
cd backend
source venv/bin/activate
pip install -r requirements.txt

# å‰ç«¯
cd frontend
pnpm install
```

3. **æŸ¥çœ‹è©³ç´°æ—¥èªŒ**:
```bash
tail -f logs/backend.log
tail -f logs/frontend.log
```

### æœå‹™ç„¡æ³•åœæ­¢

```bash
# å¼·åˆ¶æ¸…ç†æ‰€æœ‰ç›¸é—œé€²ç¨‹
pkill -9 -f "python -m yolo_api.main"
pkill -9 -f "vite"

# æ¸…ç† PID æª”æ¡ˆ
rm -f .pids/*.pid
```

## âš™ï¸ è‡ªè¨‚é…ç½®

### ä¿®æ”¹åŸ è™Ÿ

**å¾Œç«¯åŸ è™Ÿ** (é è¨­ 8000):
ç·¨è¼¯ `backend/.env`:
```bash
YOLO_API_PORT=8080
```

æˆ–ä¿®æ”¹ `backend/src/yolo_api/config.py`:
```python
api_port: int = Field(default=8080, ...)
```

**å‰ç«¯åŸ è™Ÿ** (é è¨­ 5173):
ç·¨è¼¯ `frontend/vite.config.ts`:
```typescript
export default defineConfig({
  server: {
    port: 3000
  }
})
```

### ä¿®æ”¹æ—¥èªŒä½ç½®

ç·¨è¼¯å„è…³æœ¬ä¸­çš„è®Šæ•¸ï¼š
```bash
LOG_DIR="$PROJECT_DIR/logs"
BACKEND_LOG="$LOG_DIR/backend.log"
FRONTEND_LOG="$LOG_DIR/frontend.log"
```

## ğŸ¯ æœ€ä½³å¯¦è¸

### é–‹ç™¼ç’°å¢ƒ
```bash
# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
./start.sh

# æŸ¥çœ‹å³æ™‚æ—¥èªŒ
tail -f logs/backend.log logs/frontend.log

# ä¿®æ”¹ç¨‹å¼ç¢¼å¾Œè‡ªå‹•é‡è¼‰ï¼ˆVite å’Œ FastAPI éƒ½æ”¯æ´ï¼‰
```

### é™¤éŒ¯æ¨¡å¼
```bash
# æ‰‹å‹•å•Ÿå‹•å¾Œç«¯ï¼ˆå¯çœ‹åˆ°å®Œæ•´è¼¸å‡ºï¼‰
cd backend
source venv/bin/activate
python -m yolo_api.main

# æ‰‹å‹•å•Ÿå‹•å‰ç«¯
cd frontend
pnpm dev
```

### ç”Ÿç”¢ç’°å¢ƒ
```bash
# ç¢ºèªæ‰€æœ‰æ¸¬è©¦é€šé
cd backend && pytest tests/ && cd ..

# æ§‹å»ºå‰ç«¯
cd frontend && pnpm build && cd ..

# ä½¿ç”¨ gunicorn å•Ÿå‹•å¾Œç«¯ï¼ˆéœ€å®‰è£ï¼‰
gunicorn yolo_api.main:app --workers 4 --bind 0.0.0.0:8000

# ä½¿ç”¨ nginx æä¾›å‰ç«¯éœæ…‹æª”æ¡ˆ
```

## ğŸ“Š æ•ˆèƒ½ç›£æ§

### æŸ¥çœ‹è³‡æºä½¿ç”¨

```bash
# ä½¿ç”¨ status.sh æŸ¥çœ‹åŸºæœ¬è³‡è¨Š
./status.sh

# è©³ç´°ç›£æ§
watch -n 1 './status.sh'

# ä½¿ç”¨ç³»çµ±å·¥å…·
top -pid $(cat .pids/backend.pid)
top -pid $(cat .pids/frontend.pid)
```

### æ—¥èªŒåˆ†æ

```bash
# æŸ¥çœ‹éŒ¯èª¤
grep -i "error" logs/backend.log
grep -i "error" logs/frontend.log

# çµ±è¨ˆè«‹æ±‚æ•¸
grep "request_completed" logs/backend.log | wc -l

# æŸ¥çœ‹æœ€è¿‘çš„éŒ¯èª¤
tail -n 100 logs/backend.log | grep -i "error"
```

## ğŸ” å®‰å…¨å»ºè­°

1. **ä¸è¦åœ¨ç”Ÿç”¢ç’°å¢ƒä½¿ç”¨é–‹ç™¼æœå‹™å™¨**
2. **ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ç®¡ç†æ•æ„Ÿé…ç½®**
3. **å®šæœŸæ¸…ç†æ—¥èªŒæª”æ¡ˆ**
4. **é™åˆ¶ API è¨ªå•ï¼ˆä½¿ç”¨é˜²ç«ç‰†/åå‘ä»£ç†ï¼‰**
5. **å•Ÿç”¨ HTTPSï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰**

## ğŸ“ æ”¯æ´

é‡åˆ°å•é¡Œï¼Ÿ
1. å…ˆæŸ¥çœ‹ `./status.sh` ç¢ºèªæœå‹™ç‹€æ…‹
2. æª¢æŸ¥æ—¥èªŒæª”æ¡ˆæ‰¾å‡ºéŒ¯èª¤è¨Šæ¯
3. åƒè€ƒæœ¬æ–‡æª”çš„æ•…éšœæ’é™¤ç« ç¯€
4. æŸ¥çœ‹ä¸» README.md çš„å¸¸è¦‹å•é¡Œ

---

**Tip**: å°‡é€™äº›è…³æœ¬åŠ å…¥ä½ çš„ `.gitignore` å¦‚æœæœ‰æ•æ„Ÿçš„æ—¥èªŒæˆ– PID è³‡è¨Šï¼š
```
logs/
.pids/
```
